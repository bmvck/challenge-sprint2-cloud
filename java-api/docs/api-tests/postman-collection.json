{
  "info": {
    "name": "Finance Control API - Sprint 2",
    "description": "Collection para testar a API de Gestão Financeira e Contábil com HATEOAS (Nível 3 REST).\n\nEsta collection inclui:\n- Todos os endpoints CRUD para todas as entidades\n- Testes de validação de links HATEOAS\n- Exemplos de navegação via links\n- Validação de paginação com links\n\nVersão: Sprint 2 - HATEOAS Nível 3",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "2.0.0"
  },
  "item": [
    {
      "name": "Clientes",
      "item": [
        {
          "name": "Listar Clientes",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200 or 204\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 204]);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const jsonData = pm.response.json();",
                  "    ",
                  "    pm.test(\"Response contains _links (HATEOAS)\", function () {",
                  "        pm.expect(jsonData).to.have.property('_links');",
                  "    });",
                  "    ",
                  "    pm.test(\"Pagination links present\", function () {",
                  "        pm.expect(jsonData._links).to.have.property('first');",
                  "        pm.expect(jsonData._links).to.have.property('self');",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/fiap/clientes?page=0&size=10&direction=ASC",
              "host": ["{{baseUrl}}"],
              "path": ["fiap", "clientes"],
              "query": [
                {"key": "page", "value": "0"},
                {"key": "size", "value": "10"},
                {"key": "direction", "value": "ASC"},
                {"key": "nome", "value": "", "disabled": true}
              ]
            },
            "description": "Lista todos os clientes com paginação e links HATEOAS"
          }
        },
        {
          "name": "Buscar Cliente por ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "const jsonData = pm.response.json();",
                  "",
                  "pm.test(\"Response contains _links (HATEOAS)\", function () {",
                  "    pm.expect(jsonData).to.have.property('_links');",
                  "});",
                  "",
                  "pm.test(\"Contains self link\", function () {",
                  "    pm.expect(jsonData._links).to.have.property('self');",
                  "});",
                  "",
                  "pm.test(\"Contains update link\", function () {",
                  "    pm.expect(jsonData._links).to.have.property('update');",
                  "});",
                  "",
                  "pm.test(\"Contains delete link\", function () {",
                  "    pm.expect(jsonData._links).to.have.property('delete');",
                  "});",
                  "",
                  "pm.test(\"Contains related links\", function () {",
                  "    pm.expect(jsonData._links).to.have.property('contas');",
                  "    pm.expect(jsonData._links).to.have.property('vendas');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/fiap/clientes/{{clienteId}}",
              "host": ["{{baseUrl}}"],
              "path": ["fiap", "clientes", "{{clienteId}}"]
            },
            "description": "Busca um cliente específico por ID com links HATEOAS"
          }
        },
        {
          "name": "Criar Cliente",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "const jsonData = pm.response.json();",
                  "",
                  "pm.test(\"Response contains _links (HATEOAS)\", function () {",
                  "    pm.expect(jsonData).to.have.property('_links');",
                  "});",
                  "",
                  "if (jsonData.id) {",
                  "    pm.collectionVariables.set(\"clienteId\", jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nomeCliente\": \"João Silva\",\n  \"cpfCnpj\": \"12345678901\",\n  \"email\": \"joao@email.com\",\n  \"senha\": \"senha123\",\n  \"ativo\": \"S\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/fiap/clientes",
              "host": ["{{baseUrl}}"],
              "path": ["fiap", "clientes"]
            },
            "description": "Cria um novo cliente e retorna com links HATEOAS"
          }
        },
        {
          "name": "Atualizar Cliente",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "const jsonData = pm.response.json();",
                  "",
                  "pm.test(\"Response contains _links (HATEOAS)\", function () {",
                  "    pm.expect(jsonData).to.have.property('_links');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nomeCliente\": \"João Silva Santos\",\n  \"cpfCnpj\": \"12345678901\",\n  \"email\": \"joao.santos@email.com\",\n  \"senha\": \"senha123\",\n  \"ativo\": \"S\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/fiap/clientes/{{clienteId}}",
              "host": ["{{baseUrl}}"],
              "path": ["fiap", "clientes", "{{clienteId}}"]
            },
            "description": "Atualiza um cliente existente e retorna com links HATEOAS"
          }
        },
        {
          "name": "Deletar Cliente",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 204\", function () {",
                  "    pm.response.to.have.status(204);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/fiap/clientes/{{clienteId}}",
              "host": ["{{baseUrl}}"],
              "path": ["fiap", "clientes", "{{clienteId}}"]
            },
            "description": "Deleta um cliente"
          }
        },
        {
          "name": "Navegar via Link - Contas do Cliente",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/fiap/clientes/{{clienteId}}",
              "host": ["{{baseUrl}}"],
              "path": ["fiap", "clientes", "{{clienteId}}"]
            },
            "description": "1. Primeiro, busque o cliente para obter o link 'contas'\n2. Use o href do link 'contas' para navegar"
          }
        }
      ]
    },
    {
      "name": "Centros de Custo",
      "item": [
        {
          "name": "Listar Centros de Custo",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200 or 204\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 204]);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const jsonData = pm.response.json();",
                  "    pm.test(\"Response contains _links (HATEOAS)\", function () {",
                  "        pm.expect(jsonData).to.have.property('_links');",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/fiap/centros-custo?page=0&size=10&direction=ASC",
              "host": ["{{baseUrl}}"],
              "path": ["fiap", "centros-custo"],
              "query": [
                {"key": "page", "value": "0"},
                {"key": "size", "value": "10"},
                {"key": "direction", "value": "ASC"},
                {"key": "nome", "value": "", "disabled": true}
              ]
            }
          }
        },
        {
          "name": "Buscar Centro de Custo por ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "const jsonData = pm.response.json();",
                  "pm.test(\"Response contains _links (HATEOAS)\", function () {",
                  "    pm.expect(jsonData).to.have.property('_links');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/fiap/centros-custo/{{centroCustoId}}",
              "host": ["{{baseUrl}}"],
              "path": ["fiap", "centros-custo", "{{centroCustoId}}"]
            }
          }
        },
        {
          "name": "Criar Centro de Custo",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "const jsonData = pm.response.json();",
                  "if (jsonData.id) {",
                  "    pm.collectionVariables.set(\"centroCustoId\", jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nomeCentroCusto\": \"Vendas Online\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/fiap/centros-custo",
              "host": ["{{baseUrl}}"],
              "path": ["fiap", "centros-custo"]
            }
          }
        },
        {
          "name": "Atualizar Centro de Custo",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nomeCentroCusto\": \"Vendas Online Atualizado\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/fiap/centros-custo/{{centroCustoId}}",
              "host": ["{{baseUrl}}"],
              "path": ["fiap", "centros-custo", "{{centroCustoId}}"]
            }
          }
        },
        {
          "name": "Deletar Centro de Custo",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/fiap/centros-custo/{{centroCustoId}}",
              "host": ["{{baseUrl}}"],
              "path": ["fiap", "centros-custo", "{{centroCustoId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "Contas",
      "item": [
        {
          "name": "Listar Contas",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/fiap/contas?page=0&size=10&direction=ASC",
              "host": ["{{baseUrl}}"],
              "path": ["fiap", "contas"],
              "query": [
                {"key": "page", "value": "0"},
                {"key": "size", "value": "10"},
                {"key": "direction", "value": "ASC"},
                {"key": "tipo", "value": "", "disabled": true, "description": "R ou D"},
                {"key": "nome", "value": "", "disabled": true}
              ]
            }
          }
        },
        {
          "name": "Buscar Conta por ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "const jsonData = pm.response.json();",
                  "pm.test(\"Response contains _links (HATEOAS)\", function () {",
                  "    pm.expect(jsonData).to.have.property('_links');",
                  "});",
                  "",
                  "if (jsonData.clienteId) {",
                  "    pm.test(\"Contains cliente link\", function () {",
                  "        pm.expect(jsonData._links).to.have.property('cliente');",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/fiap/contas/{{contaId}}",
              "host": ["{{baseUrl}}"],
              "path": ["fiap", "contas", "{{contaId}}"]
            }
          }
        },
        {
          "name": "Criar Conta",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "const jsonData = pm.response.json();",
                  "if (jsonData.id) {",
                  "    pm.collectionVariables.set(\"contaId\", jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nomeConta\": \"Receita de Vendas\",\n  \"tipo\": \"R\",\n  \"clienteId\": {{clienteId}}\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/fiap/contas",
              "host": ["{{baseUrl}}"],
              "path": ["fiap", "contas"]
            }
          }
        },
        {
          "name": "Atualizar Conta",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nomeConta\": \"Receita de Vendas Atualizada\",\n  \"tipo\": \"R\",\n  \"clienteId\": {{clienteId}}\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/fiap/contas/{{contaId}}",
              "host": ["{{baseUrl}}"],
              "path": ["fiap", "contas", "{{contaId}}"]
            }
          }
        },
        {
          "name": "Deletar Conta",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/fiap/contas/{{contaId}}",
              "host": ["{{baseUrl}}"],
              "path": ["fiap", "contas", "{{contaId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "Registros Contábeis",
      "item": [
        {
          "name": "Listar Registros Contábeis",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/fiap/registros-contabeis?page=0&size=10&direction=ASC",
              "host": ["{{baseUrl}}"],
              "path": ["fiap", "registros-contabeis"],
              "query": [
                {"key": "page", "value": "0"},
                {"key": "size", "value": "10"},
                {"key": "direction", "value": "ASC"},
                {"key": "contaId", "value": "", "disabled": true},
                {"key": "centroCustoId", "value": "", "disabled": true},
                {"key": "valorMinimo", "value": "", "disabled": true},
                {"key": "valorMaximo", "value": "", "disabled": true}
              ]
            }
          }
        },
        {
          "name": "Buscar Registro Contábil por ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "const jsonData = pm.response.json();",
                  "pm.test(\"Response contains _links (HATEOAS)\", function () {",
                  "    pm.expect(jsonData).to.have.property('_links');",
                  "});",
                  "",
                  "pm.test(\"Contains conta link\", function () {",
                  "    pm.expect(jsonData._links).to.have.property('conta');",
                  "});",
                  "",
                  "pm.test(\"Contains centro-custo link\", function () {",
                  "    pm.expect(jsonData._links).to.have.property('centro-custo');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/fiap/registros-contabeis/{{registroContabilId}}",
              "host": ["{{baseUrl}}"],
              "path": ["fiap", "registros-contabeis", "{{registroContabilId}}"]
            }
          }
        },
        {
          "name": "Criar Registro Contábil",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "const jsonData = pm.response.json();",
                  "if (jsonData.id) {",
                  "    pm.collectionVariables.set(\"registroContabilId\", jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"valor\": 1500.00,\n  \"contaId\": {{contaId}},\n  \"centroCustoId\": {{centroCustoId}}\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/fiap/registros-contabeis",
              "host": ["{{baseUrl}}"],
              "path": ["fiap", "registros-contabeis"]
            }
          }
        },
        {
          "name": "Atualizar Registro Contábil",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"valor\": 2000.00,\n  \"contaId\": {{contaId}},\n  \"centroCustoId\": {{centroCustoId}}\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/fiap/registros-contabeis/{{registroContabilId}}",
              "host": ["{{baseUrl}}"],
              "path": ["fiap", "registros-contabeis", "{{registroContabilId}}"]
            }
          }
        },
        {
          "name": "Deletar Registro Contábil",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/fiap/registros-contabeis/{{registroContabilId}}",
              "host": ["{{baseUrl}}"],
              "path": ["fiap", "registros-contabeis", "{{registroContabilId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "Vendas",
      "item": [
        {
          "name": "Listar Vendas",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/fiap/vendas?page=0&size=10&direction=ASC",
              "host": ["{{baseUrl}}"],
              "path": ["fiap", "vendas"],
              "query": [
                {"key": "page", "value": "0"},
                {"key": "size", "value": "10"},
                {"key": "direction", "value": "ASC"},
                {"key": "clienteId", "value": "", "disabled": true},
                {"key": "registroContabilId", "value": "", "disabled": true}
              ]
            }
          }
        },
        {
          "name": "Buscar Venda por ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "const jsonData = pm.response.json();",
                  "pm.test(\"Response contains _links (HATEOAS)\", function () {",
                  "    pm.expect(jsonData).to.have.property('_links');",
                  "});",
                  "",
                  "pm.test(\"Contains cliente link\", function () {",
                  "    pm.expect(jsonData._links).to.have.property('cliente');",
                  "});",
                  "",
                  "pm.test(\"Contains registro-contabil link\", function () {",
                  "    pm.expect(jsonData._links).to.have.property('registro-contabil');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/fiap/vendas/{{vendaId}}",
              "host": ["{{baseUrl}}"],
              "path": ["fiap", "vendas", "{{vendaId}}"]
            }
          }
        },
        {
          "name": "Criar Venda",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "const jsonData = pm.response.json();",
                  "if (jsonData.id) {",
                  "    pm.collectionVariables.set(\"vendaId\", jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": {{clienteId}},\n  \"registroContabilId\": {{registroContabilId}}\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/fiap/vendas",
              "host": ["{{baseUrl}}"],
              "path": ["fiap", "vendas"]
            }
          }
        },
        {
          "name": "Atualizar Venda",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": {{clienteId}},\n  \"registroContabilId\": {{registroContabilId}}\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/fiap/vendas/{{vendaId}}",
              "host": ["{{baseUrl}}"],
              "path": ["fiap", "vendas", "{{vendaId}}"]
            }
          }
        },
        {
          "name": "Deletar Venda",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/fiap/vendas/{{vendaId}}",
              "host": ["{{baseUrl}}"],
              "path": ["fiap", "vendas", "{{vendaId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "Testes HATEOAS",
      "item": [
        {
          "name": "Teste Navegação via Links",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/fiap/clientes/{{clienteId}}",
              "host": ["{{baseUrl}}"],
              "path": ["fiap", "clientes", "{{clienteId}}"]
            },
            "description": "1. Execute esta requisição\n2. Copie o href do link 'contas' da resposta\n3. Use esse href na próxima requisição para navegar"
          }
        },
        {
          "name": "Teste Links de Paginação",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/fiap/clientes?page=0&size=5",
              "host": ["{{baseUrl}}"],
              "path": ["fiap", "clientes"],
              "query": [
                {"key": "page", "value": "0"},
                {"key": "size", "value": "5"}
              ]
            },
            "description": "Verifica links de paginação (first, prev, next, last) na resposta"
          }
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8080",
      "type": "string"
    },
    {
      "key": "clienteId",
      "value": "1",
      "type": "string"
    },
    {
      "key": "contaId",
      "value": "1",
      "type": "string"
    },
    {
      "key": "centroCustoId",
      "value": "1",
      "type": "string"
    },
    {
      "key": "registroContabilId",
      "value": "1",
      "type": "string"
    },
    {
      "key": "vendaId",
      "value": "1",
      "type": "string"
    }
  ]
}
